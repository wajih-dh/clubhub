<app-admin-navbar></app-admin-navbar>

<div class="container mt-4">
  <h2 class="text-center mb-4">Manage Events</h2>

  <!-- Event Form -->
  <div class="card shadow p-4 mb-5">
    <h4>{{ isEditing ? 'Edit Event' : 'Create New Event' }}</h4>
    <form (ngSubmit)="isEditing ? updateEvent() : createEvent()" class="row g-3">
      <div class="col-md-6">
        <label for="title" class="form-label">Title</label>
        <input id="title" type="text" class="form-control" [(ngModel)]="newEvent.title" name="title" required>
      </div>

      <div class="col-md-6">
        <label for="location" class="form-label">Location</label>
        <input id="location" type="text" class="form-control" [(ngModel)]="newEvent.location" name="location">
      </div>

      <div class="col-md-6">
        <label for="date" class="form-label">Date</label>
        <input id="date" type="date" class="form-control" [(ngModel)]="newEvent.date" name="date" required>
      </div>

      <div class="col-md-6">
        <label for="time" class="form-label">Time</label>
        <input id="time" type="time" class="form-control" [(ngModel)]="newEvent.time" name="time" required>
      </div>

      <div class="col-12">
        <label for="description" class="form-label">Description</label>
        <textarea id="description" class="form-control" rows="3" [(ngModel)]="newEvent.description" name="description"></textarea>
      </div>

      <div class="col-12 d-flex justify-content-end gap-2">
        <button type="submit" class="btn btn-primary">
          {{ isEditing ? 'Update Event' : 'Create Event' }}
        </button>
        <button type="button" class="btn btn-secondary" *ngIf="isEditing" (click)="cancelEdit()">Cancel</button>
      </div>
    </form>
  </div>

  <!-- Accepted Events Table -->
  <div class="card shadow p-4 mb-5">
    <h4>Accepted Events List</h4>
    <table class="table table-striped table-hover mt-3">
      <thead class="table-dark">
        <tr>
          <th>Title</th>
          <th>Date</th>
          <th>Time</th>
          <th>Location</th>
          <th>Description</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let event of events">
          <td>{{ event.title }}</td>
          <td>{{ event.date }}</td>
          <td>{{ event.time }}</td>
          <td>{{ event.location }}</td>
          <td>{{ event.description }}</td>
          <td>
            <button class="btn btn-sm btn-warning me-2" (click)="editEvent(event)">‚úèÔ∏è Edit</button>
            <button class="btn btn-sm btn-danger" (click)="deleteEvent(event.event_id)">üóëÔ∏è Delete</button>
          </td>
        </tr>
      </tbody>
    </table>
    <div *ngIf="events.length === 0" class="text-center text-muted">No accepted events available.</div>
  </div>

  <!-- Refused Events Table -->
  <div class="card shadow p-4">
    <h4>Refused Events List</h4>
    <table class="table table-striped table-hover mt-3">
      <thead class="table-danger">
        <tr>
          <th>Title</th>
          <th>Date</th>
          <th>Time</th>
          <th>Location</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let event of refusedEvents">
          <td>{{ event.title }}</td>
          <td>{{ event.date }}</td>
          <td>{{ event.time }}</td>
          <td>{{ event.location }}</td>
          <td>{{ event.description }}</td>
        </tr>
      </tbody>
    </table>
    <div *ngIf="refusedEvents.length === 0" class="text-center text-muted">No refused events available.</div>
  </div>
</div>
